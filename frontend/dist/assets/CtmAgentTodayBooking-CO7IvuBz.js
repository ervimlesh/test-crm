import{u as _,f as v,r as S,h as y,a as f,j as s,N as w}from"./index-DDoEHnfR.js";import{L as D}from"./Layout-Co7qzEc2.js";import{S as T}from"./SideBar-DCoEgSRU.js";const I=()=>{var n;const{auth:i}=_(),{ctmFlightDeals:g}=v(),[h,b]=S.useState("");y(),f();const N=new Date().toISOString().split("T")[0],c=g.filter(e=>new Date(e.createdAt).toISOString().split("T")[0]===N).filter(e=>{var a,d,r,m,x,j,u;const t=h.toLowerCase(),l=((a=e==null?void 0:e.bookingId)==null?void 0:a.toLowerCase().includes(t))||((d=e==null?void 0:e.email)==null?void 0:d.toLowerCase().includes(t))||((r=e==null?void 0:e.phone)==null?void 0:r.toLowerCase().includes(t)),o=(m=i==null?void 0:i.user)!=null&&m._id?((j=(x=e==null?void 0:e.agent)==null?void 0:x._id)==null?void 0:j.toLowerCase())===((u=i==null?void 0:i.user)==null?void 0:u._id.toLowerCase()):!0;return l&&o});return s.jsx(D,{children:s.jsxs("main",{class:"crm_all_body d-flex",children:[s.jsx(T,{}),s.jsxs("div",{className:"crm_right relative",children:[s.jsx("div",{className:"header_crm flex_props justify-content-between",children:s.jsx("p",{className:"crm_title",children:"All Today BIDS ctm agent today booking"})}),s.jsx("div",{className:"bid_bg",children:s.jsx("div",{className:"bid_table",children:s.jsxs("div",{children:[s.jsx("div",{className:"row bid_cont",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"bids_inn_fresh bids_inn_fresh_br",children:[s.jsxs("label",{htmlFor:"",children:[s.jsx("img",{src:"/imgs/search-icon.png"}),"Search"]}),s.jsx("input",{type:"text",placeholder:"Enter Search Field",value:h,onChange:e=>b(e.target.value),className:"form-control"})]})})}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"BID"}),s.jsx("th",{children:"CCH NAME"}),s.jsx("th",{children:"PROVIDER"}),s.jsx("th",{children:"TRAVEL DATE & Time"}),s.jsx("th",{children:"Desti. FROM"}),s.jsx("th",{children:"Desti. TO"}),s.jsx("th",{children:"Transaction Type"}),s.jsx("th",{children:"AGENT"}),s.jsx("th",{children:"DNIS"})]})}),s.jsx("tbody",{children:c.length>0?(n=c==null?void 0:c.slice().sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt)))==null?void 0:n.map((e,t)=>{var l,o,a,d;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"bid_numm",children:[e.bookingId,s.jsx(w,{to:`/astrivion/details-pnr-flight/${e==null?void 0:e._id}`,className:"view_btn_bid",children:"View"})]})}),s.jsx("td",{children:e.cchName}),s.jsx("td",{children:e.provider.provider}),s.jsx("td",{children:e!=null&&e.outboundSegments?new Date((l=e==null?void 0:e.outboundSegments[0])==null?void 0:l.departure).toLocaleString():"N/A"}),s.jsx("td",{children:(o=e==null?void 0:e.outboundSegments[0])==null?void 0:o.from}),s.jsx("td",{children:(a=e==null?void 0:e.outboundSegments[(e==null?void 0:e.outboundSegments.length)-1])==null?void 0:a.to}),s.jsx("td",{children:s.jsx("button",{className:"status_crm",children:e.transactionType})}),s.jsx("td",{children:(d=e==null?void 0:e.agent)==null?void 0:d.userName}),s.jsx("td",{children:e==null?void 0:e.dnis})]},t)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"9",children:"No matching bookings found."})})})]})})]})})})]})]})})};export{I as default};
