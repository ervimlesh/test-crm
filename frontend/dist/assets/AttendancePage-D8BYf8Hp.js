import{r as a,a as D,j as e,b as F}from"./index-DDoEHnfR.js";import{L as C}from"./Layout-Co7qzEc2.js";import{S as E}from"./SideBar-DCoEgSRU.js";const P=()=>{const[r,c]=a.useState([]),[h,u]=a.useState(""),[g,m]=a.useState([]),[i,x]=a.useState(""),[d,j]=a.useState(""),[y,p]=a.useState(!1),o=D();a.useEffect(()=>{(async()=>{var n;try{const l=await F.get("/api/v1/management/employee-data"),s=((n=l.data)==null?void 0:n.data)||l.data;Array.isArray(s)?c(s):c([])}catch(l){console.log("Error fetching data",l),u("Failed to fetch employee records")}})()},[]);const N=t=>{o(`/astrivion/employee/profile/${t._id}`,{state:{employee:t}})},v=t=>{o(`/astrivion/employee/slip/${t._id}`,{state:{employee:t}})},S=t=>{o(`/astrivion/employee/attendance/${t}`)},w=()=>{if(!i||!d){alert("Please select both From and To dates.");return}const t=new Date(i),n=new Date(d),l=r.filter(s=>{if(!(s!=null&&s.createdAt))return!1;const f=new Date(s.createdAt);return f>=t&&f<=n});m(l),p(!0)},A=()=>{x(""),j(""),p(!1),m([])},b=y?g:r;return e.jsx(C,{children:e.jsxs("div",{className:"d-flex",children:[e.jsx(E,{}),e.jsx("div",{className:"flex-grow-1 p-4",children:e.jsxs("div",{style:{padding:"30px"},children:[e.jsx("h2",{className:"mb-4",children:" Management"}),h&&e.jsx("p",{style:{color:"red"},children:h}),e.jsxs("div",{className:"mb-4 d-flex gap-3 align-items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"From:"}),e.jsx("input",{type:"date",value:i,onChange:t=>x(t.target.value),className:"form-control"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"To:"}),e.jsx("input",{type:"date",value:d,onChange:t=>j(t.target.value),className:"form-control"})]}),e.jsx("button",{className:"btn btn-primary mt-4",onClick:w,children:"Apply Filter"}),e.jsx("button",{className:"btn btn-danger mt-4",onClick:A,children:"Reset"})]}),e.jsxs("table",{className:"table table-bordered table-striped",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email ID"}),e.jsx("th",{children:"Employee Role"}),e.jsx("th",{children:"View Profile"}),e.jsx("th",{children:"View Attendance"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Joining Date"})]})}),e.jsx("tbody",{children:b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center",children:"No employee records found."})}):b.map((t,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:n+1}),e.jsx("td",{children:t==null?void 0:t.userName}),e.jsx("td",{children:t==null?void 0:t.email}),e.jsx("td",{children:t==null?void 0:t.role}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>N(t),children:"View Profile"})}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>S(t==null?void 0:t._id),children:"View Attendance"}),e.jsx("button",{className:"btn btn-primary btn-sm text-center mt-1",onClick:()=>v(t),children:"Create Slips"})]}),e.jsx("td",{children:(t==null?void 0:t.status)==="approved"?e.jsx("span",{className:"badge bg-success",children:"Active"}):e.jsx("span",{className:"badge bg-danger",children:"Inactive"})}),e.jsx("td",{children:t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString():"-"})]},t._id))})]})]})})]})})};export{P as default};
