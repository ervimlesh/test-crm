import{r as a,j as e,b as i,V as l}from"./index-DDoEHnfR.js";import{L as E}from"./Layout-Co7qzEc2.js";import{S as V}from"./SideBar-DCoEgSRU.js";const T=()=>{const[r,j]=a.useState("airlines"),[u,p]=a.useState(""),[c,_]=a.useState(""),[d,b]=a.useState([]),[w,o]=a.useState(null),[N,x]=a.useState(""),[h,m]=a.useState(""),y=["class","currency","cardType"],n=async()=>{var s;try{const t=await i.get(`/api/v1/dropdown/get-dropdown?type=${r}`);b((s=t==null?void 0:t.data)==null?void 0:s.items)}catch{l.error("Failed to load dropdown items")}};a.useEffect(()=>{n()},[r]);const f=async s=>{var t,v;if(s.preventDefault(),!c)return l.error("All fields are required");try{await i.post("/api/v1/dropdown/add-dropdown",{type:r,label:u,value:c}),l.success("Dropdown item added!"),p(""),_(""),n()}catch(D){l.error(((v=(t=D.response)==null?void 0:t.data)==null?void 0:v.message)||"Failed to add dropdown")}},g=s=>{o(s._id),x(s.label),m(s.value)},S=async s=>{try{await i.put(`/api/v1/dropdown/update-dropdown/${s}`,{label:N,value:h}),l.success("Updated successfully!"),o(null),x(""),m(""),n()}catch{l.error("Failed to update dropdown")}},C=async s=>{if(window.confirm("Are you sure you want to delete this item?"))try{await i.delete(`/api/v1/dropdown/delete-dropdown/${s}`),l.success("Deleted successfully!"),n()}catch{l.error("Failed to delete item")}};return e.jsx(E,{children:e.jsxs("main",{class:"crm_all_body d-flex",children:[e.jsx(V,{}),e.jsxs("div",{className:"crm_right relative",children:[e.jsxs("p",{className:"title_common_semi",children:[" ","ADD Airline Class | Currency | Card Type"]}),e.jsx("div",{className:"box_crm_tr mt-4",children:e.jsx("form",{onSubmit:f,className:"",children:e.jsxs("div",{className:"mb-3 flex_all form_box_auth",children:[e.jsx("div",{className:"width_control_in100",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{children:"Dropdown Type"}),e.jsx("select",{className:"form-select box_crm_input_all cap_font",value:r,onChange:s=>j(s.target.value),children:y.map(s=>e.jsx("option",{value:s,children:s},s))})]})}),e.jsxs("div",{className:"mt-3 box_crm_input width_control_in100",children:[e.jsx("label",{children:"Label"}),e.jsx("input",{type:"text",className:"form-control box_crm_input_all",value:u,onChange:s=>p(s.target.value)})]}),e.jsx("div",{className:"width_control_in100 mt-3",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{children:"Value"}),e.jsx("input",{type:"text",className:"form-control box_crm_input_all",value:c,onChange:s=>_(s.target.value)})]})}),e.jsx("div",{className:"width_control_in100 mt-4",children:e.jsx("button",{type:"submit",className:"create_bid",children:"Add Dropdown Value"})})]})})}),e.jsxs("div",{className:"box_crm_tr mt-4",children:[e.jsxs("p",{className:"crm_title",children:["Current Values for ",e.jsx("strong",{className:"highlight_c",children:r})]}),e.jsx("ul",{className:"list_valuess",children:d==null?void 0:d.map(s=>e.jsx("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:w===s._id?e.jsxs("div",{className:"edit_cont_valuess w-100",children:[e.jsx("input",{type:"text",value:h,onChange:t=>m(t.target.value),className:"form-control",placeholder:"Value"}),e.jsxs("div",{className:"action_provider_btn_main",children:[e.jsx("button",{onClick:()=>S(s._id),className:"action_provider_btn",children:"Save"}),e.jsx("button",{onClick:()=>o(null),className:"action_provider_btn action_provider_dlt",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"current_title_ac",children:e.jsx("div",{children:s.value})}),e.jsxs("div",{className:"action_provider_btn_main",children:[e.jsxs("button",{className:"action_provider_btn",onClick:()=>g(s),children:[e.jsx("img",{src:"/imgs/edit.png"}),"Edit"]}),e.jsxs("button",{className:"action_provider_btn action_provider_dlt",onClick:()=>C(s._id),children:[e.jsx("img",{src:"/imgs/delete-i.png"}),"Delete"]})]})]})},s._id))})]})]})]})})};export{T as default};
