import{u as F,f as y,h as N,a as T,r as o,j as e}from"./index-DDoEHnfR.js";import{L as w}from"./Layout-Co7qzEc2.js";import{S as D}from"./SideBar-DCoEgSRU.js";const C=()=>{var h;const{auth:t}=F(),{ctmFlightDeals:d}=y(),i=new Date,r=N(),x=T();o.useEffect(()=>{var s,a;r!=null&&r.id&&((s=t==null?void 0:t.user)!=null&&s._id)&&((a=t==null?void 0:t.user)==null?void 0:a._id)!==r.id&&x("*",{replace:!0})},[r==null?void 0:r.id,(h=t==null?void 0:t.user)==null?void 0:h._id,x]);const u=o.useMemo(()=>(d==null?void 0:d.filter(s=>{var m,j,g,b,f;if(!((m=s==null?void 0:s.outboundSegments)!=null&&m.length))return!1;const a=s.createdAt,n=new Date(a),_=n.getDate()===i.getDate()&&n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear(),v=(j=t==null?void 0:t.user)!=null&&j._id?((b=(g=s==null?void 0:s.agent)==null?void 0:g._id)==null?void 0:b.toLowerCase())===((f=t==null?void 0:t.user)==null?void 0:f._id.toLowerCase()):!0;return _&&v}))||[],[d,i]),c=o.useMemo(()=>u.filter(s=>(s==null?void 0:s.agentFigure)==="yes"),[u]),l=o.useMemo(()=>c.reduce((s,a)=>(s.baseFare+=Number(a.baseFare||0),s.taxes+=Number(a.taxes||0),s),{baseFare:0,taxes:0}),[c]);return e.jsx(w,{children:e.jsxs("main",{class:"crm_all_body d-flex",children:[e.jsx(D,{}),e.jsxs("div",{className:"crm_right relative",children:[e.jsx("div",{className:"header_crm flex_props justify-content-between",children:e.jsx("p",{className:"crm_title",children:"Today's Revenue"})}),e.jsx("div",{className:"bid_table",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Total Approved Bookings"}),e.jsx("th",{children:"Total Base Fares"}),e.jsx("th",{children:"Total Taxes & Fees"}),e.jsx("th",{children:"Grand Total"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:c.length}),e.jsxs("td",{children:["$",l.baseFare]}),e.jsxs("td",{children:["$",l.taxes]}),e.jsxs("td",{children:["$",l.baseFare+l.taxes]})]})})]})})})]})]})})};export{C as default};
