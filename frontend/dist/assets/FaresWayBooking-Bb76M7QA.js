import{r as a,j as s,n as u,b}from"./index-DDoEHnfR.js";import{L as y}from"./Layout-Co7qzEc2.js";import{S as D}from"./SideBar-DCoEgSRU.js";import{P as F}from"./PopFlightDeals-PxfNBhfF.js";import"./jspdf.es.min-CSfEVfgj.js";const E=()=>{const{fetchFlightDeals:x}=u,[i,n]=a.useState(!1),[j,o]=a.useState(null),[c,m]=a.useState([]),[f,l]=a.useState(!1),[d,h]=a.useState(!1),g=async()=>{var e,r;try{l(!0);const t=await b.get("/api/v1/flights/faresway-booking");console.log((e=t==null?void 0:t.data)==null?void 0:e.data),t.data.success?(m((r=t==null?void 0:t.data)==null?void 0:r.data),l(!1)):(h(t.data.message),l(!1))}catch(t){console.log(t),l(!1),h("Something went wrong while fetching  faresways queries.")}};a.useEffect(()=>{g()},[]);const p=()=>{n(!1),o(null)};return s.jsxs(y,{children:[s.jsxs("div",{className:"d-flex",children:[s.jsx(D,{}),s.jsxs("div",{className:"flex-grow-1 p-4",children:[s.jsx("h2",{className:"text-center",children:"All Flight Details"}),s.jsxs("table",{className:"table table-striped table-bordered",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"#"}),s.jsx("th",{children:"First Name"}),s.jsx("th",{children:"Mobile"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Action"}),s.jsx("th",{children:"Status"})]})}),s.jsx("tbody",{children:c.length?c.map((e,r)=>s.jsxs("tr",{children:[s.jsx("td",{children:r+1}),s.jsx("td",{children:e.firstName}),s.jsx("td",{children:e.mobile}),s.jsx("td",{children:e.email}),s.jsx("td",{children:s.jsx("button",{className:"btn btn-primary btn-sm text-nowrap",onClick:()=>{o(e),n(!0)},children:"View Details"})}),s.jsx("td",{children:s.jsx("span",{className:`${e.status==="approved"?"text-success":e.status==="rejected"?"text-danger":"text-primary"}`,children:e.status})})]},e._id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"text-center",children:f?"Loading...":d||"No flight deals available."})})})]})]})]}),i&&s.jsx(F,{flightDealsPop:i,deals:j,onClose:p,fetchFlightDeals:x})]})};export{E as default};
