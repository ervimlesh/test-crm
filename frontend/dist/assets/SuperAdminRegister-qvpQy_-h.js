import{r as m,a as _,j as e,b as j,V as c}from"./index-DDoEHnfR.js";import{L as b}from"./Layout-Co7qzEc2.js";import{S as N}from"./SideBar-DCoEgSRU.js";const w=()=>{const[s,t]=m.useState({userName:"",email:"",password:"",role:"superadmin",image:null}),[o,d]=m.useState(null),p=_(),i=n=>{const{name:r,value:l}=n.target;t(a=>({...a,[r]:l}))},x=n=>{const r=n.target.files[0];r&&(t(l=>({...l,image:r})),d(URL.createObjectURL(r)))},h=async n=>{var r,l;n.preventDefault();try{const a=new FormData;a.append("userName",s.userName),a.append("email",s.email),a.append("password",s.password),a.append("number",s.number),a.append("role",s.role),s.image&&a.append("image",s.image);const u=await j.post("/api/v1/auth/register",a,{headers:{"Content-Type":"multipart/form-data"}});c.success(u.data.message),p("/login")}catch(a){c.error(((l=(r=a==null?void 0:a.response)==null?void 0:r.data)==null?void 0:l.message)||"Registration failed")}};return e.jsx(b,{children:e.jsx(e.Fragment,{children:e.jsxs("main",{class:"crm_all_body d-flex",children:[e.jsx(N,{}),e.jsxs("div",{className:"crm_right relative",children:[e.jsx("section",{className:"",children:e.jsx("div",{className:"header_crm flex_props justify-content-between",children:e.jsx("p",{className:"crm_title",children:"REGISTRATION FORM"})})}),e.jsx("section",{children:e.jsxs("div",{className:"box_crm_tr",children:[e.jsx("p",{className:"title_common_semi",children:"Add - SuperAdmin / Admin / Agent / Employee"}),e.jsxs("form",{onSubmit:h,className:"mt-2 flex_all form_box_auth",children:[e.jsx("div",{className:"width_control_in50 box_sp",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{htmlFor:"",children:"Name"}),e.jsx("input",{type:"text",name:"userName",value:s.userName,onChange:i,className:"form-control box_crm_input_all",placeholder:"Enter Name",required:!0})]})}),e.jsx("div",{className:"width_control_in50 box_sp",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{htmlFor:"",children:"Number"}),e.jsx("input",{type:"text",name:"number",value:s.number,onChange:i,className:"form-control box_crm_input_all",placeholder:"Enter Number",required:!0})]})}),e.jsx("div",{className:"width_control_in50 box_sp",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{htmlFor:"",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:i,className:"form-control box_crm_input_all",placeholder:"Enter Email"})]})}),e.jsx("div",{className:"width_control_in50 box_sp",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{htmlFor:"",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:i,className:"form-control box_crm_input_all",placeholder:"Enter Password"})]})}),e.jsx("div",{className:"width_control_in50 box_sp",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{htmlFor:"",children:"Role"}),e.jsxs("select",{name:"role",value:s.role,onChange:i,className:"form-select box_crm_input_all",id:"inputRole",children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"superadmin",children:"Superadmin"}),e.jsx("option",{value:"agent",children:"Agent"})]})]})}),e.jsx("div",{className:"width_control_in50 box_sp",children:e.jsxs("div",{className:"box_crm_input",children:[e.jsx("label",{htmlFor:"",children:"Upload Image*"}),e.jsx("input",{type:"file",name:"image",accept:"image/*",className:"form-control box_crm_input_all",onChange:x,required:!0}),o&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:o,alt:"Preview",style:{width:60,height:60,objectFit:"cover",borderRadius:4,border:"1px solid #eee"}})})]})}),e.jsx("div",{className:"width_control_in50 box_sp mt-2",children:e.jsx("button",{type:"submit",className:"create_bid",children:"Create Account"})})]})]})})]})]})})})};export{w as default};
