import{r as t,a as v,j as s,b as c,V as r}from"./index-DDoEHnfR.js";import{L as N}from"./Layout-Co7qzEc2.js";const P=()=>{const[l,i]=t.useState(1),[o,u]=t.useState(""),[d,h]=t.useState(""),[n,g]=t.useState(""),[m,p]=t.useState(""),x=v(),f=async a=>{a.preventDefault();try{const e=await c.post("/api/v1/auth/send-otp-forgot",{email:o});e.data.success?(r.success(e.data.message||"OTP sent to your email"),i(2)):r.error(e.data.message)}catch(e){console.log(e),r.error("Something went wrong while sending OTP")}},j=async a=>{a.preventDefault();try{const e=await c.post("/api/v1/auth/verify-otp-forgot",{email:o,otp:d});e.data.success?(r.success("OTP verified successfully"),i(3)):r.error(e.data.message||"Invalid OTP")}catch(e){console.log(e),r.error("Something went wrong while verifying OTP")}},w=async a=>{if(a.preventDefault(),n!==m){r.error("Passwords do not match");return}try{const e=await c.post("/api/v1/auth/reset-password-forgot",{email:o,newPassword:n});e.data.success?(r.success(e.data.message||"Password reset successfully"),x("/login")):r.error(e.data.message)}catch(e){console.log(e),r.error("Something went wrong while resetting password")}};return s.jsx(N,{title:"Forgot Password - Astrivion Ventures",children:s.jsx("main",{className:"crm_all_body_body",children:s.jsx("section",{className:"login_section container-fluid flex_props",children:s.jsx("div",{className:"container h-100 flex_props",children:s.jsxs("div",{className:"row justify-content-center align-items-center",children:[s.jsx("div",{className:"col-12 col-lg-6",children:s.jsx("div",{className:"cont_login",children:s.jsx("div",{className:"login_img",children:s.jsx("img",{src:"imgs/login-img.png"})})})}),s.jsx("div",{className:"col-12 col-lg-6",children:s.jsxs("div",{className:"agents_bg",children:[l===1&&s.jsxs("form",{onSubmit:f,children:[s.jsx("p",{className:"agent_title",children:"Forgot Password"}),s.jsx("p",{className:"mt-1",children:"If you've forgotten your password, don't worry â€” simply follow the steps to reset it securely and regain access to your account in just a few minutes."}),s.jsxs("div",{className:"row form_agent mt-2",children:[s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form_input",children:[s.jsx("label",{className:"form-label",children:"Email*"}),s.jsx("input",{type:"email",value:o,onChange:a=>u(a.target.value),className:"form-control form_c",placeholder:"Enter Your Registered Email",required:!0})]})}),s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"cont_down_all",children:s.jsx("button",{type:"submit",className:"sub_sign_in",children:"Send OTP"})})})]})]}),l===2&&s.jsx("form",{onSubmit:j,children:s.jsxs("div",{className:"row form_agent mt-2",children:[s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form_input",children:[s.jsx("label",{children:"Enter OTP"}),s.jsx("input",{type:"text",value:d,onChange:a=>h(a.target.value),className:"form-control form_c",placeholder:"Enter OTP sent to your email",required:!0})]})}),s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"cont_down_all",children:s.jsx("button",{type:"submit",className:"sub_sign_in",children:"Verify OTP"})})})]})}),l===3&&s.jsx("form",{onSubmit:w,children:s.jsxs("div",{className:"row form_agent mt-2",children:[s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form_input",children:[s.jsx("label",{children:"New Password"}),s.jsx("input",{type:"password",value:n,onChange:a=>g(a.target.value),className:"form-control form_c",placeholder:"Enter New Password",required:!0})]})}),s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"form_input",children:[s.jsx("label",{children:"Confirm Password"}),s.jsx("input",{type:"password",value:m,onChange:a=>p(a.target.value),className:"form-control form_c",placeholder:"Confirm New Password",required:!0})]})}),s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"cont_down_all",children:s.jsx("button",{type:"submit",className:"sub_sign_in",children:"Reset Password"})})})]})})]})})]})})})})})};export{P as default};
