import{f as S,r as v,h as _,a as w,j as s,N as f}from"./index-DDoEHnfR.js";import{L as y}from"./Layout-Co7qzEc2.js";import{S as D}from"./SideBar-DCoEgSRU.js";const A=()=>{var n;const{ctmFlightDeals:j}=S(),[o,u]=v.useState(""),{role:h}=_(),g=w(),b=new Date().toISOString().split("T")[0],c=j.filter(e=>new Date(e.createdAt).toISOString().split("T")[0]===b).filter(e=>{var i,a,r,x,m;const t=o.toLowerCase(),d=((i=e==null?void 0:e.bookingId)==null?void 0:i.toLowerCase().includes(t))||((a=e==null?void 0:e.email)==null?void 0:a.toLowerCase().includes(t))||((r=e==null?void 0:e.phone)==null?void 0:r.toLowerCase().includes(t)),l=h?((m=(x=e==null?void 0:e.agent)==null?void 0:x.role)==null?void 0:m.toLowerCase())===h.toLowerCase():!0;return d&&l}),N=e=>{const t=`
Link: ${window.location.origin}/astrivion/details-pnr-flight/${e._id}
  `.trim();g("/",{state:{bookingText:t}})};return s.jsx(y,{children:s.jsxs("main",{class:"crm_all_body d-flex",children:[s.jsx(D,{}),s.jsxs("div",{className:"crm_right relative",children:[s.jsx("div",{className:"header_crm flex_props justify-content-between",children:s.jsx("p",{className:"crm_title",children:"All Today BIDS"})}),s.jsx("div",{className:"bid_bg",children:s.jsx("div",{className:"bid_table",children:s.jsxs("div",{children:[s.jsx("div",{className:"row bid_cont",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"bids_inn_fresh bids_inn_fresh_br",children:[s.jsxs("label",{htmlFor:"",children:[s.jsx("img",{src:"/imgs/search-icon.png"}),"Search"]}),s.jsx("input",{type:"text",placeholder:"Enter Search Field",value:o,onChange:e=>u(e.target.value),className:"form-control"})]})})}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"BID"}),s.jsx("th",{children:"CCH NAME"}),s.jsx("th",{children:"PROVIDER"}),s.jsx("th",{children:"TRAVEL DATE & Time"}),s.jsx("th",{children:"Desti. FROM"}),s.jsx("th",{children:"Desti. TO"}),s.jsx("th",{children:"Transaction Type"}),s.jsx("th",{children:"AGENT"}),s.jsx("th",{children:"DNIS"}),s.jsx("th",{children:"Share"})]})}),s.jsx("tbody",{children:c.length>0?(n=c==null?void 0:c.slice().sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt)))==null?void 0:n.map((e,t)=>{var d,l,i,a;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"bid_numm",children:[e.bookingId,s.jsx(f,{to:`/astrivion/details-pnr-flight/${e==null?void 0:e._id}`,className:"view_btn_bid",children:"View"})]})}),s.jsx("td",{children:e.cchName}),s.jsx("td",{children:e.provider.provider}),s.jsx("td",{children:e!=null&&e.outboundSegments?new Date((d=e==null?void 0:e.outboundSegments[0])==null?void 0:d.departure).toLocaleString():"N/A"}),s.jsx("td",{children:(l=e==null?void 0:e.outboundSegments[0])==null?void 0:l.from}),s.jsx("td",{children:(i=e==null?void 0:e.outboundSegments[(e==null?void 0:e.outboundSegments.length)-1])==null?void 0:i.to}),s.jsx("td",{children:s.jsx("button",{className:"status_crm",children:e.transactionType})}),s.jsx("td",{children:(a=e==null?void 0:e.agent)==null?void 0:a.userName}),s.jsx("td",{children:e==null?void 0:e.dnis}),s.jsx("td",{children:s.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>N(e),children:"Share"})})]},t)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"9",children:"No matching bookings found."})})})]})})]})})})]})]})})};export{A as default};
