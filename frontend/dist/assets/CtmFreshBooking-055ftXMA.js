import{f as v,r as m,j as e,N as y}from"./index-DDoEHnfR.js";import{L as S}from"./Layout-Co7qzEc2.js";import{S as w}from"./SideBar-DCoEgSRU.js";import{D as N}from"./index.es-_Aq59fjB.js";import"./clsx-B-dksMZM.js";const k=()=>{const{ctmFlightDeals:o}=v(),[x,g]=m.useState(""),[h,_]=m.useState(null),[n,D]=m.useState(null),r=o==null?void 0:o.filter(s=>s.bidStatus==="pending"),c=r==null?void 0:r.filter(s=>{var j,u,b;const i=x.toLowerCase(),d=((j=s==null?void 0:s.bookingId)==null?void 0:j.toLowerCase().includes(i))||((u=s==null?void 0:s.email)==null?void 0:u.toLowerCase().includes(i))||((b=s==null?void 0:s.phone)==null?void 0:b.toLowerCase().includes(i)),t=new Date(s==null?void 0:s.createdAt);console.log("departur",t);const a=h?new Date(h):null,l=n?new Date(n):null,f=(!a||t>=a)&&(!l||t<=l);return d&&f});return e.jsx(S,{children:e.jsxs("main",{class:"crm_all_body d-flex",children:[e.jsx(w,{}),e.jsxs("div",{className:"crm_right relative",children:[e.jsx("div",{className:"header_crm flex_props justify-content-between",children:e.jsx("p",{className:"crm_title",children:"View All Fresh BID"})}),e.jsx("div",{className:"bid_bg",children:e.jsxs("div",{className:"bid_table",children:[e.jsxs("div",{className:"row bid_cont",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"bids_inn_fresh",children:[e.jsxs("label",{htmlFor:"",children:[e.jsx("img",{src:"/imgs/search-icon.png"}),"Search by Bid No, Email, or Phone"]}),e.jsx("div",{className:"bids_inn_fresh_in",children:e.jsx("input",{type:"text",placeholder:"Search...",value:x,onChange:s=>g(s.target.value),className:"form-control"})})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"bids_inn_fresh",children:[e.jsxs("label",{htmlFor:"",children:[e.jsx("img",{src:"/imgs/date-icon.png"}),"Date From"]}),e.jsx("div",{className:"bids_inn_fresh_in",children:e.jsx(N,{selected:h,onChange:s=>_(s),placeholderText:"Pick Date",dateFormat:"MM-dd-yyyy",className:"form-control",maxDate:new Date})})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"bids_inn_fresh",children:[e.jsxs("label",{htmlFor:"",children:[e.jsx("img",{src:"/imgs/date-icon.png"}),"Date To"]}),e.jsx("div",{className:"bids_inn_fresh_in",children:e.jsx(N,{selected:n,onChange:s=>D(s),placeholderText:"Pick Date",dateFormat:"MM-dd-yyyy",className:"form-control",maxDate:new Date})})]})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"BID"}),e.jsx("th",{children:"CCH NAME"}),e.jsx("th",{children:"PROVIDER"}),e.jsx("th",{children:"TRAVEL DATE & Time"}),e.jsx("th",{children:"Desti. FROM"}),e.jsx("th",{children:"Desti. TO"}),e.jsx("th",{children:"Transaction Type"}),e.jsx("th",{children:"AGENT"}),e.jsx("th",{children:" DNIS"})]})}),e.jsx("tbody",{children:(c==null?void 0:c.length)>0?c.map((s,i)=>{var d,t,a,l;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"bid_numm",children:[s.bookingId,e.jsx(y,{to:`/astrivion/details-pnr-flight/${s==null?void 0:s._id}`,className:"view_btn_bid",children:"View"})]})}),e.jsx("td",{children:s.cchName}),e.jsx("td",{children:s==null?void 0:s.provider.provider}),e.jsx("td",{children:s!=null&&s.outboundSegments?new Date((d=s==null?void 0:s.outboundSegments[0])==null?void 0:d.departure).toLocaleString():"N/A"}),e.jsx("td",{children:(t=s==null?void 0:s.outboundSegments[0])==null?void 0:t.from}),e.jsx("td",{children:(a=s==null?void 0:s.outboundSegments[(s==null?void 0:s.outboundSegments.length)-1])==null?void 0:a.to}),e.jsx("td",{children:e.jsx("button",{className:"status_crm",children:s.transactionType})}),e.jsx("td",{children:(l=s==null?void 0:s.agent)==null?void 0:l.userName}),e.jsx("td",{children:s==null?void 0:s.dnis})]},i)}):e.jsx("tr",{children:e.jsx("td",{colSpan:9,children:e.jsx("h5",{children:"No results found. Try checking your spelling or using different keywords..."})})})})]})})]})})]})]})})};export{k as default};
