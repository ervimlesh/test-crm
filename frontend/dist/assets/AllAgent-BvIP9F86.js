import{e as o,r as l,j as s,b as d}from"./index-DDoEHnfR.js";import{L as x}from"./Layout-Co7qzEc2.js";import{S as j}from"./SideBar-DCoEgSRU.js";const _=()=>{const{agent:n}=o(),[e,a]=l.useState([]);l.useEffect(()=>{n&&a(n)},[n]);const h=async(t,r)=>{try{await d.patch(`/api/v1/auth/status/${t}`,{status:r}),a(c=>c.map(i=>i._id===t?{...i,status:r}:i))}catch(c){console.error("Error updating status:",c)}};return s.jsx(x,{children:s.jsxs("main",{class:"crm_all_body d-flex",children:[s.jsx(j,{}),s.jsxs("div",{className:"crm_right relative",children:[s.jsx("div",{className:"header_crm flex_props justify-content-between",children:s.jsxs("p",{className:"crm_title",children:["All Agents(",e.length,")"]})}),s.jsx("div",{className:"bid_table",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"S.No."}),s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Number"}),s.jsx("th",{children:"Role"}),s.jsx("th",{children:"Status"})]})}),s.jsx("tbody",{children:e&&e.length>0?e.map((t,r)=>s.jsxs("tr",{children:[s.jsx("td",{children:r+1}),s.jsx("td",{children:t.userName}),s.jsx("td",{children:t.email}),s.jsx("td",{children:t.number||"-"}),s.jsx("td",{children:t.role}),s.jsx("td",{children:(t==null?void 0:t.status)==="pending"?s.jsx("button",{className:"btn_status_agent",onClick:()=>h(t._id,"approved"),children:"Approve"}):s.jsx("button",{className:(t==null?void 0:t.status)==="rejected"||(t==null?void 0:t.status)==="rejectedAgain"?"btn_status_agent btn_warning":"btn_status_agent",onClick:()=>h(t._id,t.status==="approved"?"rejectedAgain":"approved"),children:t.status==="approved"?"Remove Access":"Grant Access"})})]},t._id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"23",className:"text-center",children:s.jsx("h1",{children:"Not available"})})})})]})})})]})]})})};export{_ as default};
