import{r,b as x,j as t}from"./index-DDoEHnfR.js";import{L as g}from"./Layout-Co7qzEc2.js";import{S as _}from"./SideBar-DCoEgSRU.js";const f=()=>{var h;const[e,u]=r.useState([]),[p,c]=r.useState(!1),[l,d]=r.useState(null);r.useEffect(()=>{o()},[]);const o=async()=>{c(!0),d(null);try{const s=await x.get("/api/v1/auth/agent-request");u(s.data)}catch(s){d(s.response.message||"Something went wrong ")}finally{c(!1)}},a=async(s,n)=>{var j;const i=JSON.parse(localStorage.getItem("auth")),m=(j=i==null?void 0:i.user)==null?void 0:j.email;await x.patch(`/api/v1/auth/status/${s}`,{status:n,approvedBy:m}),await o()};return t.jsx(t.Fragment,{children:t.jsx(g,{children:t.jsxs("main",{class:"crm_all_body d-flex",children:[t.jsx(_,{}),t.jsx("div",{className:"crm_right relative",children:t.jsxs("div",{className:"bid_table",children:[t.jsx("p",{className:"crm_title",children:"All Registration Requests"}),t.jsx("div",{className:"table-responsive",children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"S.No."}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Email"}),t.jsx("th",{children:"Number"}),t.jsx("th",{children:"Role"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Approved/Reject By"})]})}),t.jsx("tbody",{children:e?t.jsx(t.Fragment,{children:(h=e==null?void 0:e.data)==null?void 0:h.map((s,n)=>t.jsxs("tr",{children:[t.jsx("td",{children:n+1}),t.jsx("td",{children:s.userName}),t.jsx("td",{children:s.email}),t.jsx("td",{children:s.number||"-"}),t.jsx("td",{children:s.role}),t.jsx("td",{children:s.status==="pending"?t.jsxs("div",{className:"flex_props justify-content-center gap-2",children:[t.jsx("button",{className:"btn_status_agent btn_warning",onClick:()=>a(s._id,"approved"),children:"Approve"}),t.jsx("button",{className:"btn_status_agent",onClick:()=>a(s._id,"rejected"),children:"Reject"})]}):t.jsx("success",{children:t.jsx("button",{className:s.status==="rejected"?"btn_status_agent":s.status==="approved"?"btn_status_agent btn_warning":"",onClick:()=>a(s._id,s.status==="approved"?"rejected":"approved"),children:s.status})})}),t.jsxs("td",{children:[" ",s==null?void 0:s.approvedBy," "]})]},s._id))}):t.jsx("tr",{children:t.jsx("td",{colSpan:"23",className:"text-center",children:p?"Loading...":l||"No Users data  available."})})})]})})]})})]})})})};export{f as default};
