import{r,j as e,b as j}from"./index-DDoEHnfR.js";import{L as m}from"./Layout-Co7qzEc2.js";import{S as u}from"./SideBar-DCoEgSRU.js";const S=()=>{const[n,h]=r.useState([]),[c,a]=r.useState(!1),[l,d]=r.useState(!1),i=async()=>{var t;try{a(!0);const s=await j.get("/api/v1/package/get-packages-query");s.data.success?(h((t=s==null?void 0:s.data)==null?void 0:t.packageQuery),a(!1)):(d(s.data.message),a(!1))}catch{a(!1),d("Something went wrong while fetching package queries.")}};return r.useEffect(()=>{i()},[]),e.jsx(m,{children:e.jsxs("div",{className:"d-flex",children:[e.jsx(u,{}),e.jsxs("div",{className:"flex-grow-1 p-4",children:[e.jsx("h2",{className:"text-start",children:"All Packages"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"m-0",children:"Package List"}),e.jsx("button",{className:"btn btn-primary",onClick:i,disabled:c,children:c?"Reloading...":"Reload"})]}),e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Sr. No"}),e.jsx("th",{children:"UserName"}),e.jsx("th",{children:"Mail"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Created At"})]})}),e.jsx("tbody",{children:c?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"Loading..."})}):l?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:l})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"No Packages Found"})}):n.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:s+1}),e.jsx("td",{children:t==null?void 0:t.userName}),e.jsx("td",{children:t==null?void 0:t.email}),e.jsx("td",{children:t==null?void 0:t.phone}),e.jsx("td",{children:t!=null&&t.createdAt?new Intl.DateTimeFormat("en-US",{day:"numeric",month:"long"}).format(new Date(t==null?void 0:t.createdAt)).replace(/\d+/,o=>{const x=["th","st","nd","rd"][o%10-1]||"th";return`${o}${x}`}):""})]},s))})]})]})]})})};export{S as default};
