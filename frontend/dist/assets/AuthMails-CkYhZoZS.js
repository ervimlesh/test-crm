import{r as n,j as s,b as m,V as c}from"./index-DDoEHnfR.js";import{L as D}from"./Layout-Co7qzEc2.js";import{S as F}from"./SideBar-DCoEgSRU.js";const z=()=>{const[b,A]=n.useState([]),[C,x]=n.useState(!1),[i,_]=n.useState({authMails:"",authPassword:"",mailStatus:"",status:"inactive"}),[j,f]=n.useState(!1),[P,p]=n.useState(!1),[r,g]=n.useState({authMails:"",authPassword:"",mailStatus:"",status:"inactive"}),[E,I]=n.useState(null),[v,N]=n.useState(!1),o=async()=>{var a;try{const t=await m.get("/api/v1/service/get-auth-mails");t.data.success?A(((a=t==null?void 0:t.data)==null?void 0:a.data)||[]):console.error("Failed to fetch auth mails")}catch(t){console.error("Error fetching auth mails:",t)}};n.useEffect(()=>{o()},[]);const M=async a=>{var t,d;try{const l=await m.delete(`/api/v1/service/delete-auth-mails/${a}`);(t=l==null?void 0:l.data)!=null&&t.success?(c.success((d=l==null?void 0:l.data)==null?void 0:d.message),o()):c.error("Failed to delete auth mail.")}catch(l){console.error("Error deleting auth mail:",l),c.error("An error occurred while deleting auth mail.")}},h=a=>{_({...i,[a.target.name]:a.target.value})},k=async a=>{var t,d,l;a.preventDefault(),f(!0);try{const e=await m.post("/api/v1/service/create-auth-mails",{authMails:i.authMails,authPassword:i.authPassword,mailStatus:i.mailStatus,status:i.status});(t=e==null?void 0:e.data)!=null&&t.success?(c.success((d=e==null?void 0:e.data)==null?void 0:d.message),x(!1),_({authMails:"",authPassword:"",mailStatus:"",status:"inactive"}),o()):c.error((l=e==null?void 0:e.data)==null?void 0:l.message)}catch{c.error("An error occurred while adding auth mail.")}f(!1)},y=a=>{I(a._id),g({authMails:a.authMails||"",authPassword:a.authPassword||"",mailStatus:a.mailStatus||"",status:a.status||"inactive"}),p(!0)},u=a=>{g({...r,[a.target.name]:a.target.value})},q=async a=>{var t,d,l;a.preventDefault(),N(!0);try{const e=await m.put(`/api/v1/service/update-auth-mails/${E}`,{authMails:r.authMails,authPassword:r.authPassword,mailStatus:r.mailStatus,status:r.status});(t=e==null?void 0:e.data)!=null&&t.success?(c.success(((d=e==null?void 0:e.data)==null?void 0:d.message)||"Updated successfully"),p(!1),o()):c.error(((l=e==null?void 0:e.data)==null?void 0:l.message)||"Failed to update")}catch{c.error("An error occurred while updating.")}N(!1)},S=b.filter(a=>a.mailStatus==="auth-mail"),w=b.filter(a=>a.mailStatus==="invoice-mail");return s.jsx(s.Fragment,{children:s.jsx(D,{children:s.jsxs("main",{class:"crm_all_body d-flex",children:[s.jsx(F,{}),s.jsxs("div",{className:"crm_right relative",children:[s.jsx("section",{className:"",children:s.jsx("div",{className:"header_crm flex_props justify-content-between",children:s.jsx("p",{className:"crm_title",children:"Auth Mail Manager"})})}),s.jsx("section",{children:s.jsxs("div",{className:"box_crm_tr",children:[s.jsxs("p",{className:"title_common_semi flex_props justify-content-between",children:["Added Auth Mails",s.jsx("div",{children:s.jsxs("p",{onClick:()=>x(!0),className:"provider_btnn",children:[s.jsx("img",{src:"/imgs/add.png"}),"Add Auth Mail"]})})]}),s.jsx("div",{className:"bid_bg mt-4",children:s.jsxs("div",{className:"bid_table",children:[C&&s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{className:"provider_semi_semi",children:[s.jsx("h4",{className:"add_pr_title",children:"Add Auth Mail"}),s.jsx("hr",{className:"my-3"}),s.jsxs("form",{onSubmit:k,children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Auth Email"}),s.jsx("input",{type:"email",className:"form-control form_in_pr",name:"authMails",value:i.authMails,onChange:h,required:!0})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Auth Password"}),s.jsx("input",{type:"text",className:"form-control form_in_pr",name:"authPassword",value:i.authPassword,onChange:h,required:!0})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Mail Type"}),s.jsxs("select",{className:"form-select form_in_pr",name:"mailStatus",value:i.mailStatus,onChange:h,required:!0,children:[s.jsx("option",{value:"",children:"Select Mail Type"}),s.jsx("option",{value:"auth-mail",children:"Auth Mail"}),s.jsx("option",{value:"invoice-mail",children:"Invoice Mail"})]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Status"}),s.jsxs("select",{className:"form-select form_in_pr",name:"status",value:i.status,onChange:h,required:!0,children:[s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"active",children:"Active"})]})]}),s.jsxs("div",{className:"flex_props gap-2 mt-3 justify-content-end",children:[s.jsx("button",{type:"submit",className:"btn_provider_pop btn_provider_pop_add",disabled:j,children:j?"Adding...":"Add"}),s.jsx("button",{type:"button",className:"btn_provider_pop",onClick:()=>x(!1),disabled:j,children:"Cancel"})]})]})]})}),P&&s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:s.jsxs("div",{className:"provider_semi_semi",children:[s.jsx("h4",{className:"add_pr_title",children:"Edit Auth Mail"}),s.jsx("hr",{className:"my-3"}),s.jsxs("form",{onSubmit:q,children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Auth Email"}),s.jsx("input",{type:"email",className:"form-control form_in_pr",name:"authMails",value:r.authMails,onChange:u,required:!0})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Auth Password"}),s.jsx("input",{type:"text",className:"form-control form_in_pr",name:"authPassword",value:r.authPassword,onChange:u,required:!0})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Mail Type"}),s.jsxs("select",{className:"form-select form_in_pr",name:"mailStatus",value:r.mailStatus,onChange:u,required:!0,children:[s.jsx("option",{value:"auth-mail",children:"Auth Mail"}),s.jsx("option",{value:"invoice-mail",children:"Invoice Mail"})]})]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("label",{className:"form-label",children:"Status"}),s.jsxs("select",{className:"form-select form_in_pr",name:"status",value:r.status,onChange:u,required:!0,children:[s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"active",children:"Active"})]})]}),s.jsxs("div",{className:"flex_props gap-2 mt-3 justify-content-end",children:[s.jsx("button",{type:"submit",className:"btn_provider_pop btn_provider_pop_add",disabled:v,children:v?"Updating...":"Update"}),s.jsx("button",{type:"button",className:"btn_provider_pop",onClick:()=>p(!1),disabled:v,children:"Cancel"})]})]})]})}),s.jsx("h3",{className:"mt-4 mb-2",children:"Auth Mails"}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Password"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Action"})]})}),s.jsx("tbody",{children:S.length>0?S.map((a,t)=>s.jsxs("tr",{children:[s.jsx("td",{children:a==null?void 0:a.authMails}),s.jsx("td",{children:a==null?void 0:a.authPassword}),s.jsx("td",{className:(a==null?void 0:a.status)==="active"?"text-success":"text-danger",children:a==null?void 0:a.status}),s.jsx("td",{className:"action_provider",children:s.jsxs("div",{className:"action_provider_btn_main",children:[s.jsxs("button",{className:"action_provider_btn",onClick:()=>y(a),children:[s.jsx("img",{src:"/imgs/edit.png"}),"Edit"]}),s.jsxs("button",{className:"action_provider_btn action_provider_dlt",onClick:()=>M(a._id),children:[s.jsx("img",{src:"/imgs/delete-i.png"}),"Delete"]})]})})]},t)):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",children:"No Auth Mail Data Available"})})})]})}),s.jsx("h3",{className:"mt-5 mb-2",children:"Invoice Mails"}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Email"}),s.jsx("th",{children:"Password"}),s.jsx("th",{children:"Mail Type"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Action"})]})}),s.jsx("tbody",{children:w.length>0?w.map((a,t)=>s.jsxs("tr",{children:[s.jsx("td",{children:a==null?void 0:a.authMails}),s.jsx("td",{children:a==null?void 0:a.authPassword}),s.jsx("td",{children:a==null?void 0:a.mailStatus}),s.jsx("td",{className:(a==null?void 0:a.status)==="active"?"text-success":"text-danger",children:a==null?void 0:a.status}),s.jsx("td",{className:"action_provider",children:s.jsxs("div",{className:"action_provider_btn_main",children:[s.jsxs("button",{className:"action_provider_btn",onClick:()=>y(a),children:[s.jsx("img",{src:"/imgs/edit.png"}),"Edit"]}),s.jsxs("button",{className:"action_provider_btn action_provider_dlt",onClick:()=>M(a._id),children:[s.jsx("img",{src:"/imgs/delete-i.png"}),"Delete"]})]})})]},t)):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",children:"No Invoice Mail Data Available"})})})]})})]})})]})})]})]})})})};export{z as default};
