import{h,a as p,r as n,j as e,b as i,V as s}from"./index-DDoEHnfR.js";import{L as x}from"./Layout-Co7qzEc2.js";import{S as g}from"./SideBar-DCoEgSRU.js";const N=()=>{const{id:d}=h(),u=p(),[t,l]=n.useState({reducePercentage:"",reduceUrl:""}),[f,j]=n.useState([]),o=c=>{const{id:a,value:r}=c.target;l({...t,[a]:r})};n.useEffect(()=>{(async()=>{try{const a=await i.get(`/api/v1/flights/detail-reduce-reduction-percentage/${d}`);if(a.data.success&&a.data.data){const r=a.data.data;l({reducePercentage:r.reducePercentage||"",reduceUrl:r.reduceUrl||""})}else s.error("Failed to fetch reduction data.")}catch(a){console.log(a),s.error("Error fetching reduction data.")}})()},[d]);const m=async c=>{c.preventDefault();try{const a={reducePercentage:t.reducePercentage,reduceUrl:t.reduceUrl},r=await i.patch(`/api/v1/flights/reduce-reduction-percentage-srcDest-update/${d}`,a);r.data.success?(s.success(r.data.message),u(-1)):s.error(r.data.message||"Update failed")}catch(a){console.log(a),s.error("Failed to update. Please try again.")}};return e.jsx(x,{children:e.jsxs("div",{className:"d-flex",children:[e.jsx(g,{}),e.jsx("div",{className:"flex-grow-1 p-4",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"text-center",children:"Edit Reduce Price"}),e.jsxs("form",{onSubmit:m,className:"form_booking",children:[e.jsxs("div",{className:"form_booking",children:[e.jsxs("label",{htmlFor:"",children:["Reduce Amount ",e.jsx("span",{children:"*"})]}),e.jsx("div",{className:"form_input",children:e.jsx("input",{type:"Number",maxLength:"3",id:"reducePercentage",value:t.reducePercentage,onChange:o,required:!0,placeholder:"Enter reduction percentage",className:"form-control",min:"0",max:"100"})}),e.jsxs("div",{className:"col-md-9 mb-3",children:[e.jsx("label",{htmlFor:"reduceUrl",className:"form-label",children:"Reduce Url"}),e.jsxs("select",{id:"reduceUrl",className:"form-select",value:t.reduceUrl,onChange:o,required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"faresway.com",children:"Faresway"}),e.jsx("option",{value:"traveloways.com",children:"Traveloways"}),e.jsx("option",{value:"faresvilla.com",children:" Faresvilla"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})})})]})})};export{N as default};
