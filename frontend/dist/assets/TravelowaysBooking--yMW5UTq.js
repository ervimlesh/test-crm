import{r as a,j as e,n as f,b as u}from"./index-DDoEHnfR.js";import{L as b}from"./Layout-Co7qzEc2.js";import{S as D}from"./SideBar-DCoEgSRU.js";import{P as v}from"./PopFlightDeals-PxfNBhfF.js";import"./jspdf.es.min-CSfEVfgj.js";const P=()=>{const{fetchFlightDeals:d}=f,[r,i]=a.useState(!1),[x,n]=a.useState(null),[o,j]=a.useState([]),[m,l]=a.useState(!1),[c,h]=a.useState(!1),g=async()=>{var s;try{l(!0);const t=await u.get("/api/v1/flights/traveloways-booking");t.data.success?(j((s=t==null?void 0:t.data)==null?void 0:s.data),l(!1)):(h(t.data.message),l(!1))}catch(t){console.log(t),l(!1),h("Something went wrong while fetching traveloways queries.")}};a.useEffect(()=>{g()},[]);const p=()=>{i(!1),n(null)};return e.jsxs(b,{children:[e.jsxs("div",{className:"d-flex",children:[e.jsx(D,{}),e.jsxs("div",{className:"flex-grow-1 p-4",children:[e.jsx("h2",{className:"text-center",children:"All Flight Details"}),e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"First Name"}),e.jsx("th",{children:"Mobile"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Action"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:o.length?o.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:t+1}),e.jsx("td",{children:s.firstName}),e.jsx("td",{children:s.mobile}),e.jsx("td",{children:s.email}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-primary btn-sm text-nowrap",onClick:()=>{n(s),i(!0)},children:"View Details"})}),e.jsx("td",{children:e.jsx("span",{className:`${s.status==="approved"?"text-success":s.status==="rejected"?"text-danger":"text-primary"}`,children:s.status})})]},s._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center",children:m?"Loading...":c||"No flight deals available."})})})]})]})]}),r&&e.jsx(v,{flightDealsPop:r,deals:x,onClose:p,fetchFlightDeals:d})]})};export{P as default};
