import{R as I,f as L,r as o,j as t,N as B}from"./index-DDoEHnfR.js";import{L as C}from"./Layout-Co7qzEc2.js";import{S as k}from"./SideBar-DCoEgSRU.js";const N=n=>{if(!n)return"";try{return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return""}},d=(n,e)=>{var c,i,u;switch(e){case"bid":return(n==null?void 0:n.bookingId)||"";case"cchname":return(n==null?void 0:n.cchName)||"";case"email":return(n==null?void 0:n.email)||"";case"billingphone":return(n==null?void 0:n.contactNumber)||"";case"cardlast4":return((c=n==null?void 0:n.cardNumber)==null?void 0:c.slice(-4))||"";case"provider":return(n==null?void 0:n.provider)||"";case"bidstatus":return(n==null?void 0:n.bidStatus)||"";case"date":return N((u=(i=n==null?void 0:n.outboundSegments)==null?void 0:i[0])==null?void 0:u.departure);case"from":return[...((n==null?void 0:n.outboundSegments)||[]).map(r=>r.from),...((n==null?void 0:n.inboundSegments)||[]).map(r=>r.from)].join(", ");case"to":return[...((n==null?void 0:n.outboundSegments)||[]).map(r=>r.to),...((n==null?void 0:n.inboundSegments)||[]).map(r=>r.to)].join(", ");case"alloc":return[...((n==null?void 0:n.outboundSegments)||[]).map(r=>r.alLocator),...((n==null?void 0:n.inboundSegments)||[]).map(r=>r.alLocator)].join(", ");case"ticketnumber":return((n==null?void 0:n.passengerDetails)||[]).map(r=>r.ticketNumber).join(", ");default:return""}},y=()=>{const{ctmFlightDeals:n}=L(),[e,c]=o.useState(""),[i,u]=o.useState(""),[r,f]=o.useState(""),[m,D]=o.useState(!1),F=o.useCallback(()=>{f(i.trim()),D(!0)},[i]),x=o.useMemo(()=>!m||!e||!r?[]:n.filter(s=>d(s,e).toString().toLowerCase().includes(r.toLowerCase())),[n,e,r,m]);return t.jsx(C,{children:t.jsxs("main",{class:"crm_all_body d-flex",children:[t.jsx(k,{}),t.jsxs("div",{className:"crm_right relative",children:[t.jsx("div",{className:"margin_minus_b",children:t.jsxs("div",{className:"box_crm_tr margin_box_tr",children:[t.jsx("p",{class:"title_common_semi",children:"Find Booking"}),t.jsx("div",{className:"box_crm_input mt-4",children:t.jsxs("select",{className:"form-select box_crm_input_all",value:e,onChange:s=>c(s.target.value),children:[t.jsx("option",{value:"",children:"------- Select Search Key -------"}),t.jsx("option",{value:"bid",children:"BID"}),t.jsx("option",{value:"cchname",children:"CCH NAME"}),t.jsx("option",{value:"email",children:"EMAIL"}),t.jsx("option",{value:"billingphone",children:"BILLING PHONE"}),t.jsx("option",{value:"cardlast4",children:"CARD LAST 4 DIGIT"}),t.jsx("option",{value:"provider",children:"Provider"}),t.jsx("option",{value:"bidstatus",children:"BID Status"}),t.jsx("option",{value:"date",children:"Departure Date"}),t.jsx("option",{value:"alloc",children:"AL Locator"}),t.jsx("option",{value:"ticketnumber",children:"Ticket Number"}),t.jsx("option",{value:"from",children:"From"}),t.jsx("option",{value:"to",children:"To"})]})}),t.jsx("div",{className:"box_crm_input mt-4",children:t.jsx("input",{type:"text",className:"form-control box_crm_input_all",placeholder:"Enter value",value:i,onChange:s=>u(s.target.value),disabled:!e})}),t.jsx("div",{className:"mt-3 find_booking_btn",children:t.jsx("button",{className:"create_bid w-100",onClick:F,children:"Search"})})]})}),x.length>0?t.jsxs(t.Fragment,{children:[t.jsx("hr",{className:"my-5 hr_h1"}),t.jsx("h4",{className:"crm_title",children:"Searched Data"}),t.jsx("div",{className:"bid_table mt-4",children:t.jsx("div",{className:"table-responsive",children:t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"BID"}),t.jsx("th",{children:"CCH NAME"}),t.jsx("th",{children:"PROVIDER"}),t.jsx("th",{children:"BOOKING STATUS"}),t.jsx("th",{children:"TRAVEL DATE"}),t.jsx("th",{children:"FROM"}),t.jsx("th",{children:"TO"}),t.jsx("th",{children:"Agent"})]})}),t.jsx("tbody",{children:x.map(s=>{var h,j,g,p,b,a,S,v,_,l;return t.jsxs("tr",{children:[t.jsx("td",{children:t.jsxs("div",{className:"bid_numm",children:[s.bookingId,t.jsx(B,{to:`/astrivion/details-pnr-flight/${s==null?void 0:s._id}`,className:"view_btn_bid",children:"View"})]})}),t.jsx("td",{children:(s==null?void 0:s.cchName)||"-"}),t.jsx("td",{children:(s==null?void 0:s.provider)||"-"}),t.jsx("td",{children:(s==null?void 0:s.bidStatus)||"-"}),t.jsx("td",{children:N((j=(h=s==null?void 0:s.outboundSegments)==null?void 0:h[0])==null?void 0:j.departure)}),t.jsxs("td",{children:[((g=s==null?void 0:s.outboundSegments)==null?void 0:g.length)>0&&t.jsxs("div",{children:[t.jsx("p",{className:"segment_span_semi",children:"OutBound Flight From"}),s.outboundSegments[0].from]}),((p=s==null?void 0:s.inboundSegments)==null?void 0:p.length)>0&&t.jsxs("div",{children:[t.jsx("p",{className:"segment_span_semi",children:"InBound Flight From"}),s.inboundSegments[0].from]})]}),t.jsxs("td",{children:[((b=s==null?void 0:s.outboundSegments)==null?void 0:b.length)>0&&t.jsxs("div",{children:[t.jsx("p",{className:"segment_span_semi",children:"OutBound Flight To"}),(S=(a=s==null?void 0:s.outboundSegments)==null?void 0:a[s.outboundSegments.length-1])==null?void 0:S.to]}),((v=s==null?void 0:s.inboundSegments)==null?void 0:v.length)>0&&t.jsxs("div",{children:[t.jsx("p",{className:"segment_span_semi",children:"InBound Flight To"}),(l=(_=s==null?void 0:s.inboundSegments)==null?void 0:_[s.inboundSegments.length-1])==null?void 0:l.to]})]}),t.jsx("td",{children:s==null?void 0:s.chargedBy}),console.log("heeeeeeee",s)]},s==null?void 0:s._id)})})]})})})]}):m?t.jsx("span",{children:"No data found"}):null]})]})})},V=I.memo(y);export{V as default};
