import{u as w,r as u,j as e,b as A}from"./index-DDoEHnfR.js";/* empty css                     */import{L as E}from"./Layout-Co7qzEc2.js";import{S as Y}from"./SideBar-DCoEgSRU.js";const P=()=>{var g;const{auth:o}=w(),[r,l]=u.useState({}),[i,x]=u.useState(new Date),d=(g=o==null?void 0:o.user)==null?void 0:g._id,s=i.getFullYear(),a=i.getMonth(),N=new Date(s,a+1,0).getDate(),p=i.toLocaleString("default",{month:"long"});u.useEffect(()=>{d&&(async()=>{try{const n=await A.get(`/api/v1/management/attendance-data/${d}?month=${a+1}&year=${s}`);if(n.data.success){const c=n.data.attendance,m={};c.forEach(f=>{var j;const h=new Date(f.date),D=h.getMonth(),v=h.getFullYear();if(D===a&&v===s){const y=h.getDate();(j=f.sessions[0])!=null&&j.in?m[y]="P":m[y]="A"}}),l(m)}else l({})}catch(n){console.error("Error fetching attendance:",n),l({})}})()},[d,a,s]);const M=()=>{x(t=>new Date(t.getFullYear(),t.getMonth()-1,1))},b=()=>{const t=new Date;a===t.getMonth()&&s===t.getFullYear()||x(c=>new Date(c.getFullYear(),c.getMonth()+1,1))};return e.jsx(E,{children:e.jsxs("div",{className:"crm_all_body d-flex",children:[e.jsx(Y,{}),e.jsx("div",{className:"crm_right relative",children:e.jsx("div",{className:"flex-grow-1 p-4",children:e.jsxs("div",{className:"employee-home",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center my-3",children:[e.jsx("button",{className:"btn btn-secondary",onClick:M,children:"⬅ Prev"}),e.jsxs("h2",{className:"text-center",children:[p," ",s," - My Attendance"]}),e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Next ➡"})]}),e.jsx("div",{className:"calendar-grid",children:Array.from({length:N},(t,n)=>n+1).map(t=>e.jsxs("div",{className:`day-box ${r[t]==="P"?"present":"absent"}`,children:[e.jsx("span",{className:"day-number",children:t}),e.jsx("span",{className:"status",children:r[t]?r[t]:"A"})]},t))})]})})})]})})};export{P as default};
