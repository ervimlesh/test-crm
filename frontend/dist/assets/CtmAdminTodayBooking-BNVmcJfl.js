import{u as y,f as w,r as N,h as D,a as T,j as s,N as A}from"./index-DDoEHnfR.js";import{S as C}from"./SideBar-DCoEgSRU.js";import{L}from"./Layout-Co7qzEc2.js";const R=()=>{var x,m;const{auth:t}=y(),{ctmFlightDeals:v}=w(),[n,S]=N.useState(""),d=D(),r=T();N.useEffect(()=>{var e,i;d!=null&&d.id&&((e=t==null?void 0:t.user)!=null&&e._id)&&((i=t==null?void 0:t.user)==null?void 0:i._id)!==d.id&&r("*",{replace:!0})},[d==null?void 0:d.id,(x=t==null?void 0:t.user)==null?void 0:x._id,r]);const f=new Date().toISOString().split("T")[0],c=v.filter(e=>new Date(e.createdAt).toISOString().split("T")[0]===f).filter(e=>{var o,l,j,u,g,b,_;const i=n.toLowerCase(),a=((o=e==null?void 0:e.bookingId)==null?void 0:o.toLowerCase().includes(i))||((l=e==null?void 0:e.email)==null?void 0:l.toLowerCase().includes(i))||((j=e==null?void 0:e.phone)==null?void 0:j.toLowerCase().includes(i)),h=(u=t==null?void 0:t.user)!=null&&u._id?((b=(g=e==null?void 0:e.agent)==null?void 0:g._id)==null?void 0:b.toLowerCase())===((_=t==null?void 0:t.user)==null?void 0:_._id.toLowerCase()):!0;return a&&h});return console.log("filteredBookings is",c),s.jsx(L,{children:s.jsxs("main",{class:"crm_all_body d-flex",children:[s.jsx(C,{}),s.jsxs("div",{className:"crm_right relative",children:[s.jsx("div",{className:"header_crm flex_props justify-content-between",children:s.jsx("p",{className:"crm_title",children:"All Today BIDS ctm admin today booking"})}),s.jsx("div",{className:"bid_bg",children:s.jsx("div",{className:"bid_table",children:s.jsxs("div",{children:[s.jsx("div",{className:"row bid_cont",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"bids_inn_fresh bids_inn_fresh_br",children:[s.jsxs("label",{htmlFor:"",children:[s.jsx("img",{src:"/imgs/search-icon.png"}),"Search"]}),s.jsx("input",{type:"text",placeholder:"Enter Search Field",value:n,onChange:e=>S(e.target.value),className:"form-control"})]})})}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"BID"}),s.jsx("th",{children:"CCH NAME"}),s.jsx("th",{children:"PROVIDER"}),s.jsx("th",{children:"TRAVEL DATE & Time"}),s.jsx("th",{children:"Desti. FROM"}),s.jsx("th",{children:"Desti. TO"}),s.jsx("th",{children:"Transaction Type"}),s.jsx("th",{children:"AGENT"}),s.jsx("th",{children:"DNIS"})]})}),s.jsx("tbody",{children:c.length>0?(m=c==null?void 0:c.slice().sort((e,i)=>new Date(i.updatedAt)-new Date(e.updatedAt)))==null?void 0:m.map((e,i)=>{var a,h,o,l;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"bid_numm",children:[e.bookingId,s.jsx(A,{to:`/astrivion/details-pnr-flight/${e==null?void 0:e._id}`,className:"view_btn_bid",children:"View"})]})}),s.jsx("td",{children:e.cchName}),s.jsx("td",{children:e.provider.provider}),s.jsx("td",{children:e!=null&&e.outboundSegments?new Date((a=e==null?void 0:e.outboundSegments[0])==null?void 0:a.departure).toLocaleString():"N/A"}),s.jsx("td",{children:(h=e==null?void 0:e.outboundSegments[0])==null?void 0:h.from}),s.jsx("td",{children:(o=e==null?void 0:e.outboundSegments[(e==null?void 0:e.outboundSegments.length)-1])==null?void 0:o.to}),s.jsx("td",{children:s.jsx("button",{className:"status_crm",children:e.transactionType})}),s.jsx("td",{children:(l=e==null?void 0:e.agent)==null?void 0:l.userName}),s.jsx("td",{children:e==null?void 0:e.dnis})]},i)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"9",children:"No matching bookings found."})})})]})})]})})})]})]})})};export{R as default};
