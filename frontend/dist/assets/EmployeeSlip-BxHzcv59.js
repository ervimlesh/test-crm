import{r as t,i as y,j as e,b as f}from"./index-DDoEHnfR.js";import{L as b}from"./Layout-Co7qzEc2.js";import{S as C}from"./SideBar-DCoEgSRU.js";/* empty css                     */const P={companyName:"Astrivion Venture Pvt. Ltd.",companyAddress:"123, Khasara road, City, State - 400001",payPeriod:"August 2025",payDate:"2025-08-31",slipNo:"SLIP-2025-08-001",empId:"",empName:"",designation:"",department:"",pan:"",uan:"",pfNo:"",esicNo:"",bankName:"",accountNo:"",ifsc:"",paymentMode:"",daysInMonth:31,daysPresent:26,leaves:0,paidLeaves:0,overtimeHours:0,basic:0,hra:0,conveyance:0,medical:0,specialAllowance:0,bonus:0,otherEarnings:0,pf:0,professionalTax:0,incomeTax:0,esic:0,otherDeductions:0,penalties:0,approvedBy:"",notes:"This is a system generated salary slip.",employeeEmail:""};function A(){const[a,u]=t.useState(P),[h,x]=t.useState(!1),d=y();t.useEffect(()=>{var i,c,r,m;if(d.state){const s=d.state;console.log("location state is ",s);const l=((m=(i=s==null?void 0:s.employee)==null?void 0:i.document)==null?void 0:m[((r=(c=s==null?void 0:s.employee)==null?void 0:c.document)==null?void 0:r.length)-1])||{};console.log("doc is ",l),u(o=>{var N,j;return{...o,...l,empId:l.empId||o.empId,empName:(s==null?void 0:s.employee.userName)||o.empName,employeeEmail:(s==null?void 0:s.employee.email)||o.employeeEmail,designation:l.designation||o.designation,department:l.department||o.department,pan:l.pan||o.pan,uan:l.uan||o.uan,pfNo:l.pfNo||o.pfNo,accountNo:l.accountNo||o.accountNo,bankName:l.bankName||o.bankName,esicNo:l.esic||o.esicNo,ifsc:l.ifsc||o.ifsc,payDate:l.payDate||o.payDate,payPeriod:l.payPeriod||o.payPeriod,slipNo:l.slipNo||o.slipNo,paymentMode:l.paymentMode||o.paymentMode,penalties:((N=s==null?void 0:s.employee)==null?void 0:N.penalties)||o.penalties,approvedBy:((j=s==null?void 0:s.employee)==null?void 0:j.approvedBy)||o.approvedBy}})}},[d.state]);const p=t.useMemo(()=>{const i=Number(a.basic||0)+Number(a.hra||0)+Number(a.conveyance||0)+Number(a.medical||0)+Number(a.specialAllowance||0)+Number(a.bonus||0)+Number(a.otherEarnings||0),c=Number(a.pf||0)+Number(a.professionalTax||0)+Number(a.incomeTax||0)+Number(a.esic||0)+Number(a.otherDeductions||0)+Number(a.penalties||0),r=i-c;return{earnings:i,deductions:c,net:r}},[a]),n=i=>{const{name:c,value:r}=i.target,m=["daysInMonth","daysPresent","leaves","paidLeaves","overtimeHours","basic","hra","conveyance","medical","specialAllowance","bonus","otherEarnings","pf","professionalTax","incomeTax","esic","otherDeductions","penalties"];u(s=>({...s,[c]:m.includes(c)?r===""?"":Number(r):r}))},g=async()=>{var i;x(!0);try{const c=await f.post("/api/v1/management/account-slip",{data:a});alert(((i=c.data)==null?void 0:i.message)||"Mail sent")}catch(c){console.error(c),alert("Failed to send mail — check server logs and env config.")}finally{x(!1)}},v=async()=>{try{const i=await f.post("/api/v1/management/account-pdf",{data:a},{responseType:"blob"}),c=new Blob([i.data],{type:"application/pdf"}),r=window.URL.createObjectURL(c),m=document.createElement("a");m.href=r,m.download=`${a.empName||"salary"}-slip.pdf`,document.body.appendChild(m),m.click(),m.remove(),window.URL.revokeObjectURL(r)}catch(i){console.error(i),alert("Could not download PDF")}};return e.jsx(b,{children:e.jsxs("div",{className:"d-flex employee-slip-page",children:[e.jsx(C,{}),e.jsx("div",{className:"flex-grow-1 p-4",children:e.jsxs("div",{className:"slip-card card p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Company Name"}),e.jsx("input",{name:"companyName",value:a.companyName,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group mt-2",children:[e.jsx("label",{children:"Company Address"}),e.jsx("input",{name:"companyAddress",value:a.companyAddress,onChange:n,className:"form-control"})]})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("div",{children:["Pay Period:"," ",e.jsx("input",{name:"payPeriod",value:a.payPeriod,onChange:n,className:"form-control form-control-sm d-inline w-auto"})]}),e.jsxs("div",{children:["Pay Date:"," ",e.jsx("input",{name:"payDate",value:a.payDate,onChange:n,className:"form-control form-control-sm d-inline w-auto"})]}),e.jsxs("div",{children:["Slip No:"," ",e.jsx("input",{name:"slipNo",value:a.slipNo,onChange:n,className:"form-control form-control-sm d-inline w-auto"})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Employee Details"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{name:"empName",value:a.empName,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Employee ID"}),e.jsx("input",{name:"empId",value:a.empId,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Designation"}),e.jsx("input",{name:"designation",value:a.designation,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Department"}),e.jsx("input",{name:"department",value:a.department,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PAN"}),e.jsx("input",{name:"pan",value:a.pan,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"UAN"}),e.jsx("input",{name:"uan",value:a.uan,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"PF No"}),e.jsx("input",{name:"pfNo",value:a.pfNo,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ESIC No"}),e.jsx("input",{name:"esicNo",value:a.esicNo,onChange:n,className:"form-control"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Payment / Bank"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bank Name"}),e.jsx("input",{name:"bankName",value:a.bankName,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account No"}),e.jsx("input",{name:"accountNo",value:a.accountNo,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"IFSC"}),e.jsx("input",{name:"ifsc",value:a.ifsc,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payment Mode"}),e.jsx("input",{name:"paymentMode",value:a.paymentMode,onChange:n,className:"form-control"})]}),e.jsx("h6",{className:"mt-3",children:"Attendance"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Days in Month"}),e.jsx("input",{type:"number",name:"daysInMonth",value:a.daysInMonth,onChange:n,className:"form-control"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Days Present"}),e.jsx("input",{type:"number",name:"daysPresent",value:a.daysPresent,onChange:n,className:"form-control"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Leaves"}),e.jsx("input",{type:"number",name:"leaves",value:a.leaves,onChange:n,className:"form-control"})]})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-7",children:[e.jsx("h6",{children:"Earnings"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Basic"}),e.jsx("input",{type:"number",name:"basic",value:a.basic,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HRA"}),e.jsx("input",{type:"number",name:"hra",value:a.hra,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Conveyance"}),e.jsx("input",{type:"number",name:"conveyance",value:a.conveyance,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Medical"}),e.jsx("input",{type:"number",name:"medical",value:a.medical,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Special Allowance"}),e.jsx("input",{type:"number",name:"specialAllowance",value:a.specialAllowance,onChange:n,className:"form-control"})]})]}),e.jsxs("div",{className:"col-md-5",children:[e.jsx("h6",{children:"Deductions"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Provident Fund (PF)"}),e.jsx("input",{type:"number",name:"pf",value:a.pf,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Professional Tax"}),e.jsx("input",{type:"number",name:"professionalTax",value:a.professionalTax,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Income Tax"}),e.jsx("input",{type:"number",name:"incomeTax",value:a.incomeTax,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ESIC"}),e.jsx("input",{type:"number",name:"esic",value:a.esic,onChange:n,className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Penalties"}),e.jsx("input",{type:"number",name:"penalties",value:a.penalties,onChange:n,className:"form-control"})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Total Earnings:"})," ₹",p.earnings.toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Deductions:"})," ₹",p.deductions.toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Net Pay:"})," ₹",p.net.toLocaleString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Approved By:"})," ",a.approvedBy||"Pending"]})]}),e.jsxs("div",{className:"text-end",children:[e.jsx("div",{children:e.jsx("label",{children:"Employee Email"})}),e.jsx("input",{name:"employeeEmail",value:a.employeeEmail,onChange:n,className:"form-control w-100"}),e.jsxs("div",{className:"mt-2 d-flex gap-2",children:[e.jsx("button",{className:"btn btn-outline-secondary",onClick:v,children:"Download PDF"}),e.jsx("button",{className:"btn btn-primary",onClick:g,disabled:h,children:h?"Sending...":"Send Mail"})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("label",{children:"Notes"}),e.jsx("textarea",{name:"notes",value:a.notes,onChange:n,className:"form-control",rows:2})]}),e.jsx("div",{className:"small muted text-end mt-2",children:"This is a computer generated slip and does not require signature."})]})})]})})}export{A as default};
